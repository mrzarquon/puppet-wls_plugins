#!/bin/bash

# ugly script that will wait for all the forked install subtasks to finish

PATH=$PATH:<%= @wls_java_home %>/bin:

export PATH

export JAVA_HOME=<%= @wls_java_home %>:

#"/opt/was/oracle/installers/ovd/Disk1/runInstaller -jreLoc ${wls_java_home} -silent -ignoreSysPrereqs -response /opt/was/oracle/installers/ovd/ovd_silent_install.txt -invPtrLoc /home/webadmin/oraInst.loc"

RunInstaller=<%= @wls_runinstaller_location %>

$RunInstaller -jreLoc <%= @wls_java_home %> -silent -ignoreSysPrereqs -response <%= @wls_runinstaller_answers %> -invPtrLoc /home/webadmin/oraInst.loc

PID=`ps ax | grep -v grep | grep OraInstall | cut -d' ' -f1`

while [ -d "/proc/${PID}" ]
do
	echo "Oracle install is still running, PID: ${PID}"
	sleep 20
done

echo "Oracle install process has ended"
